/**
 * --------------------------------------------------------------------
 * jQuery customfileinput plugin
 * Author: Scott Jehl, scott@filamentgroup.com
 * Copyright (c) 2009 Filament Group 
 * licensed under MIT (filamentgroup.com/examples/mit-license.txt)
 * --------------------------------------------------------------------
 */
$.fn.customFileInput=function(){var fileInput=$(this).addClass('customfile-input').mouseover(function(){upload.addClass('customfile-hover')}).mouseout(function(){upload.removeClass('customfile-hover')}).focus(function(){upload.addClass('customfile-focus');fileInput.data('val',fileInput.val())}).blur(function(){upload.removeClass('customfile-focus');$(this).trigger('checkChange')}).bind('disable',function(){fileInput.attr('disabled',true);upload.addClass('customfile-disabled')}).bind('enable',function(){fileInput.removeAttr('disabled');upload.removeClass('customfile-disabled')}).bind('checkChange',function(){if(fileInput.val()&&fileInput.val()!=fileInput.data('val')){fileInput.trigger('change')}}).bind('change',function(){var fileName=$(this).val().split(/\\/).pop();var fileExt='customfile-ext-'+fileName.split('.').pop().toLowerCase();uploadFeedback.text(fileName).removeClass(uploadFeedback.data('fileExt')||'').addClass(fileExt).data('fileExt',fileExt).addClass('customfile-feedback-populated');uploadButton.text('Change')}).click(function(){fileInput.data('val',fileInput.val());setTimeout(function(){fileInput.trigger('checkChange')},100)});var upload=$('<div class="customfile"></div>');var uploadButton=$('<span class="customfile-button" aria-hidden="true">Browse</span>').appendTo(upload);var uploadFeedback=$('<span class="customfile-feedback" aria-hidden="true">Upload an image to be converted...</span>').appendTo(upload);if(fileInput.is('[disabled]')){fileInput.trigger('disable')}upload.mousemove(function(e){fileInput.css({'left':e.pageX-upload.offset().left-fileInput.outerWidth()+20,'top':e.pageY-upload.offset().top-$(window).scrollTop()-3})}).insertAfter(fileInput);fileInput.appendTo(upload);return $(this)};